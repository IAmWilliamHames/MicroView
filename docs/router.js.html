<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: router.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: router.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { createSignal, createMemo } from './leom.js';
import { h } from './microview.js';

/**
 * @file A simple hash-based router for client-side navigation.
 */

/**
 * Creates a router instance that reactively updates the displayed component based on the URL hash.
 *
 * @param {object.&lt;string, function(): HTMLElement>} routes - An object where keys are URL paths (e.g., '/', '/about')
 * and values are component functions to render for those paths. A '/404' route is recommended for handling unknown paths.
 * @returns {{activeComponent: function(): HTMLElement, navigate: function(string): void}} An object containing:
 * - `activeComponent`: A memoized signal that returns the component function for the current route.
 * - `navigate`: A function to programmatically change the route.
 * @example
 * const routes = {
 *   '/': () => h('h1', {}, 'Home'),
 *   '/about': () => h('h1', {}, 'About'),
 *   '/404': () => h('h1', {}, 'Not Found')
 * };
 * const { activeComponent, navigate } = createRouter(routes);
 *
 * // In your main component:
 * h('div', {},
 *   h('nav', {},
 *     Link({ to: '/', children: ['Home'] }),
 *     Link({ to: '/about', children: ['About'] })
 *   ),
 *   activeComponent // This will render the correct component
 * );
 */
export function createRouter(routes) {
  // Signal to hold the current route from the URL hash
  const currentRoute = createSignal(window.location.hash || '#/');

  // Update the signal whenever the hash changes
  window.addEventListener('hashchange', () => {
    currentRoute(window.location.hash || '#/');
  });

  /**
   * Navigates to a new path by updating the URL hash.
   * @param {string} path - The path to navigate to (e.g., '/', '/profile').
   */
  const navigate = (path) => {
    window.location.hash = path;
  };

  // A memoized value that returns the component corresponding to the current route
  const activeComponent = createMemo(() => {
    const path = currentRoute().slice(1) || '/';
    return (
      routes[path] || routes['/404'] || (() => h('h1', null, '404 Not Found'))
    );
  });

  return { activeComponent, navigate };
}

/**
 * A component that creates a hyperlink for client-side navigation.
 * It renders an `&lt;a>` tag with an `href` attribute that points to a URL hash.
 *
 * @param {object} props - The properties for the Link component.
 * @param {string} props.to - The destination path (e.g., '/home', '/settings').
 * @param {Array&lt;HTMLElement|string>} props.children - The content of the link.
 * @returns {HTMLElement} An `&lt;a>` element.
 * @example
 * Link({ to: '/dashboard', children: ['Go to Dashboard'] })
 */
export function Link({ to, children }) {
  return h('a', { href: `#${to}` }, ...children);
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#Link">Link</a></li><li><a href="global.html#createEffect">createEffect</a></li><li><a href="global.html#createMemo">createMemo</a></li><li><a href="global.html#createRoot">createRoot</a></li><li><a href="global.html#createRouter">createRouter</a></li><li><a href="global.html#createSignal">createSignal</a></li><li><a href="global.html#h">h</a></li><li><a href="global.html#mount">mount</a></li><li><a href="global.html#onCleanup">onCleanup</a></li><li><a href="global.html#scheduleUpdate">scheduleUpdate</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Tue Oct 21 2025 02:00:34 GMT-0500 (Central Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
